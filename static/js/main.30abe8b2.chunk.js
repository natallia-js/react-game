(this["webpackJsonprock-scissors-paper"]=this["webpackJsonprock-scissors-paper"]||[]).push([[0],[,,,,,,,,,function(t,e,a){},,,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},,function(t,e,a){},function(t,e,a){},,function(t,e,a){"use strict";a.r(e);var c=a(1),o=a.n(c),r=a(10),s=a.n(r),n=(a(15),a(2)),d=a.p+"static/media/logo.6ce24c58.svg",i=(a(16),a(7)),u=(a(17),a(9),a(0)),l=Object.freeze({rock:0,scissors:1,paper:2}),f=function(t){var e=t.btnKind,a=t.isBlocked,o=t.btnClicked,r=t.selected,s=t.lose,n=t.acceptKeyboardEvents,d=Object(c.useRef)();return Object(c.useEffect)((function(){var t=function(t){(e===l.rock&&"r"===t.key||e===l.scissors&&"s"===t.key||e===l.paper&&"p"===t.key)&&d.current.click()};return n&&window.addEventListener("keydown",t),function(){n&&window.removeEventListener("keydown",t)}}),[]),Object(u.jsx)("div",{className:r?"animate__animated animate__flip":"",children:Object(u.jsx)("button",{ref:d,className:function(){var t="game-choice-btn";switch(a||(t+=" blink"),r&&(t+=s?" lose-btn":" selected-btn"),e){case l.rock:t+=" rock-btn";break;case l.scissors:t+=" scissors-btn";break;case l.paper:t+=" paper-btn"}return t}(),onClick:function(){a||o()}})})},m=(a(19),function(t){var e=t.userCanMakeChoice,a=t.setUserChoice,o=t.userChoice,r=t.playsComputer,s=t.startMakingComputerChoice,n=t.choiceLose,d=t.acceptKeyboardEvents,i=Object(c.useRef)();Object(c.useEffect)((function(){var t=function(t){r&&t.stopPropagation()};return i.current.addEventListener("click",t),function(){i.current&&i.current.removeEventListener("click",t)}}),[]);var m=function(t){a(t)};return Object(c.useEffect)((function(){var t;s&&m((t=3,Math.floor(Math.random()*Math.floor(t))))}),[s]),Object(u.jsxs)("div",{className:"btns-area",ref:i,children:[Object(u.jsxs)("div",{className:"top-block",children:[Object(u.jsx)(f,{btnKind:l.rock,isBlocked:!e,btnClicked:function(){return m(l.rock)},selected:o===l.rock,lose:o===l.rock&&n,acceptKeyboardEvents:d}),Object(u.jsx)(f,{btnKind:l.scissors,isBlocked:!e,btnClicked:function(){return m(l.scissors)},selected:o===l.scissors,lose:o===l.scissors&&n,acceptKeyboardEvents:d})]}),Object(u.jsx)("div",{className:"bottom-block",children:Object(u.jsx)(f,{btnKind:l.paper,isBlocked:!e,btnClicked:function(){return m(l.paper)},selected:o===l.paper,lose:o===l.paper&&n,acceptKeyboardEvents:d})})]})}),b=a(5),j=a.p+"static/media/win.7b4475ee.mp3",O=a.p+"static/media/draw.0f5186fc.mp3",h=a.p+"static/media/lose.d77a572c.mp3",S=(a(20),a(8)),p="My_RSP_Game";function v(t){if(t){var e=JSON.parse(localStorage.getItem(p));localStorage.setItem(p,JSON.stringify(Object(S.a)(Object(S.a)({},e),t)))}}function L(){return JSON.parse(localStorage.getItem(p))}var k=a(21),x=10,y=function(){var t=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("started")?{data:t.started,fromLocStor:!0}:(v({started:!1}),{data:!1,fromLocStor:!1})})),e=Object(n.a)(t,2),a=e[0],o=e[1],r=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("roundOver")?{data:t.roundOver,fromLocStor:!0}:(v({roundOver:!0}),{data:!0,fromLocStor:!1})})),s=Object(n.a)(r,2),d=s[0],f=s[1],S=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("firstPlayerScore")?{data:t.firstPlayerScore,fromLocStor:!0}:(v({firstPlayerScore:0}),{data:0,fromLocStor:!1})})),p=Object(n.a)(S,2),y=p[0],g=p[1],C=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("secondPlayerScore")?{data:t.secondPlayerScore,fromLocStor:!0}:(v({secondPlayerScore:0}),{data:0,fromLocStor:!1})})),w=Object(n.a)(C,2),E=w[0],N=w[1],P=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("firstPlayerTurn")?{data:t.firstPlayerTurn,fromLocStor:!0}:(v({firstPlayerTurn:!0}),{data:!0,fromLocStor:!1})})),F=Object(n.a)(P,2),R=F[0],_=F[1],M=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("firstUserChoice")?{data:t.firstUserChoice,fromLocStor:!0}:(v({firstUserChoice:null}),{data:null,fromLocStor:!1})})),K=Object(n.a)(M,2),U=K[0],G=K[1],T=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("secondUserChoice")?{data:t.secondUserChoice,fromLocStor:!0}:(v({secondUserChoice:null}),{data:null,fromLocStor:!1})})),q=Object(n.a)(T,2),B=q[0],I=q[1],J=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("startMakingComputerChoice")?{data:t.startMakingComputerChoice,fromLocStor:!0}:(v({startMakingComputerChoice:!1}),{data:!1,fromLocStor:!1})})),A=Object(n.a)(J,2),V=A[0],z=A[1],D=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("useSounds")?{data:t.useSounds,fromLocStor:!0}:(v({useSounds:!0}),{data:!0,fromLocStor:!1})})),Y=Object(n.a)(D,2),H=Y[0],Q=Y[1],W=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("soundVolume")?{data:t.soundVolume,fromLocStor:!0}:(v({soundVolume:1}),{data:1,fromLocStor:!1})})),X=Object(n.a)(W,2),Z=X[0],$=X[1],tt=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("last10GameResults")?{data:t.last10GameResults,fromLocStor:!0}:(v({last10GameResults:[]}),{data:[],fromLocStor:!1})})),et=Object(n.a)(tt,2),at=et[0],ct=et[1],ot=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("currRound")?{data:t.currRound,fromLocStor:!0}:(v({currRound:1}),{data:1,fromLocStor:!1})})),rt=Object(n.a)(ot,2),st=rt[0],nt=rt[1],dt=Object(c.useState)((function(){var t=L();return t&&t.hasOwnProperty("lostPlayer")?{data:t.lostPlayer,fromLocStor:!0}:(v({lostPlayer:0}),{data:0,fromLocStor:!1})})),it=Object(n.a)(dt,2),ut=it[0],lt=it[1],ft=Object(b.a)(j,{volume:Z.data}),mt=Object(n.a)(ft,1)[0],bt=Object(b.a)(O,{volume:Z.data}),jt=Object(n.a)(bt,1)[0],Ot=Object(b.a)(h,{volume:Z.data}),ht=Object(n.a)(Ot,1)[0],St=Object(c.useRef)(),pt=Object(c.useRef)();return Object(c.useEffect)((function(){function t(t){"n"===t.key?St.current.click():"c"===t.key&&pt.current.click()}return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]),Object(c.useEffect)((function(){U.fromLocStor||(v({firstUserChoice:U.data}),null!==U.data&&_({data:!1,fromLocStor:!1}))}),[U.data]),Object(c.useEffect)((function(){R.fromLocStor||(v({firstPlayerTurn:R.data}),!1===R.data&&z({data:!0,fromLocStor:!1}))}),[R.data]),Object(c.useEffect)((function(){if(!B.fromLocStor&&(v({secondUserChoice:B.data}),null!==B.data)){U.data!==B.data?U.data===l.rock&&B.data===l.scissors||U.data===l.scissors&&B.data===l.paper||U.data===l.paper&&B.data===l.rock?(g({data:y.data+1,fromLocStor:!1}),lt({data:2,fromLocStor:!1}),H.data&&mt()):(N({data:E.data+1,fromLocStor:!1}),lt({data:1,fromLocStor:!1}),H.data&&ht()):H.data&&jt(),f({data:!0,fromLocStor:!1}),z({data:!1,fromLocStor:!1})}}),[B.data]),Object(c.useEffect)((function(){a.fromLocStor||v({started:a.data})}),[a.data]),Object(c.useEffect)((function(){if(!d.fromLocStor&&(v({roundOver:d.data}),d.data&&st.data===x)){if(at.data.length<10)ct({data:[].concat(Object(i.a)(at.data),["{".concat(y.data,":").concat(E.data,"}")]),fromLocStor:!1});else{var t=at.data;t.shift(),ct({data:[].concat(Object(i.a)(t),["{".concat(y.data,":").concat(E.data,"}")]),fromLocStor:!1})}o({data:!1,fromLocStor:!1})}}),[d.data]),Object(c.useEffect)((function(){y.fromLocStor||v({firstPlayerScore:y.data})}),[y.data]),Object(c.useEffect)((function(){E.fromLocStor||v({secondPlayerScore:E.data})}),[E.data]),Object(c.useEffect)((function(){V.fromLocStor||v({startMakingComputerChoice:V.data})}),[V.data]),Object(c.useEffect)((function(){H.fromLocStor||v({useSounds:H.data})}),[H.data]),Object(c.useEffect)((function(){Z.fromLocStor||v({soundVolume:Z.data})}),[Z.data]),Object(c.useEffect)((function(){at.fromLocStor||v({last10GameResults:at.data})}),[at.data]),Object(c.useEffect)((function(){st.fromLocStor||v({currRound:st.data})}),[st.data]),Object(c.useEffect)((function(){ut.fromLocStor||v({lostPlayer:ut.data})}),[ut.data]),Object(u.jsxs)("div",{className:"game-area",children:[Object(u.jsxs)("div",{className:k("score-area",{win:d.data&&st.data===x&&y.data>E.data,lose:d.data&&st.data===x&&y.data<E.data,draw:d.data&&st.data===x&&y.data===E.data}),children:[Object(u.jsx)("div",{className:"score-area-1-block",children:y.data}),Object(u.jsxs)("div",{className:"score-area-2-block",children:[Object(u.jsxs)("span",{className:"curr-round",children:["Round ",st.data," of ",x]}),d.data&&st.data===x&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("br",{}),Object(u.jsxs)("div",{className:"animate__animated animate__bounceInLeft",children:["Game over. ",d.data&&st.data===x&&y.data===E.data?"Draw":d.data&&st.data===x&&y.data>E.data?"You win":"Computer wins"]})]})]}),Object(u.jsx)("div",{className:"score-area-3-block",children:E.data})]}),Object(u.jsxs)("div",{className:"choice-btns-area",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"propose-user-choice-block",children:a.data&&R.data&&Object(u.jsx)("div",{className:"animate__animated animate__flash",children:'\'Your choice (click image button or press english "r", "s" or "p" on keyboard):\''})}),Object(u.jsx)(m,{userCanMakeChoice:a.data&&!d.data&&R.data,setUserChoice:function(t){G({data:t,fromLocStor:!1})},userChoice:U.data,playsComputer:!1,choiceLose:1===ut.data,acceptKeyboardEvents:!0})]}),Object(u.jsx)("div",{children:Object(u.jsx)(m,{userCanMakeChoice:a.data&&!d.data&&!R.data,setUserChoice:function(t){I({data:t,fromLocStor:!1})},userChoice:B.data,playsComputer:!0,startMakingComputerChoice:V.data,choiceLose:2===ut.data,acceptKeyboardEvents:!1})})]}),Object(u.jsxs)("div",{className:"game-btns-area",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{disabled:a.data&&1===st.data&&!d.data,onClick:function(){o({data:!0,fromLocStor:!1}),f({data:!1,fromLocStor:!1}),g({data:0,fromLocStor:!1}),N({data:0,fromLocStor:!1}),_({data:!0,fromLocStor:!1}),G({data:null,fromLocStor:!1}),I({data:null,fromLocStor:!1}),nt({data:1,fromLocStor:!1}),lt({data:0,fromLocStor:!1})},ref:St,className:"fill new-game-btn",children:"New game"}),Object(u.jsx)("button",{disabled:!a.data||a.data&&!d.data,onClick:function(){G({data:null,fromLocStor:!1}),I({data:null,fromLocStor:!1}),f({data:!1,fromLocStor:!1}),_({data:!0,fromLocStor:!1}),nt({data:st.data+1,fromLocStor:!1}),lt({data:0,fromLocStor:!1})},ref:pt,className:"fill",children:"Continue"})]}),Object(u.jsxs)("div",{className:"prompts-block",id:"blink",children:[!a.data&&'To start, press "New game" button or english "n" on keyboard',a.data&&d.data&&'Press "Continue" (or english "c" on keyboard) to continue or "New game" (or english "n" on keyboard) to restart']}),Object(u.jsxs)("div",{className:"slidecontainer",children:[Object(u.jsx)("input",{type:"range",min:0,max:1,step:.02,value:Z.data,className:"slider",onChange:function(t){$({data:t.target.valueAsNumber,fromLocStor:!1})}}),H.data&&Object(u.jsx)("button",{className:"sound-btn music-btn",onClick:function(){return Q({data:!1,fromLocStor:!1})}}),!H.data&&Object(u.jsx)("button",{className:"no-sound-btn music-btn",onClick:function(){return Q({data:!0,fromLocStor:!1})}})]})]}),Object(u.jsxs)("div",{className:"game-res",children:[Object(u.jsx)("button",{className:"fill clear-btn",onClick:function(){ct({data:[],fromLocStor:!1})},children:"\u2716 Clear"}),"Last 10 game results: ".concat(at.data.join("; "))]})]})]})};var g=function(){var t=Object(c.useState)(!1),e=Object(n.a)(t,2),a=e[0],o=e[1];return Object(c.useEffect)((function(){document.addEventListener("fullscreenchange",(function(t){document.fullscreenElement?o(!0):o(!1)}))}),[]),Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("header",{className:"App-header",children:[Object(u.jsxs)("div",{className:"Game-title-block",children:[Object(u.jsx)("div",{className:"game-logo",children:Object(u.jsx)("img",{src:d,className:"App-logo",alt:"logo"})}),Object(u.jsx)("div",{className:"game-title",children:"Rock, Scissors, Paper"})]}),Object(u.jsx)(y,{}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"fill full-scr-btn",onClick:function(){if(a)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{var t=document.documentElement;(e=t).requestFullscreen?e.requestFullscreen():e.webkitrequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullscreen&&e.mozRequestFullScreen()}var e},children:a?"Exit Full Screen":"Full Screen"})}),Object(u.jsxs)("footer",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{id:"school-logo",src:"https://rs.school/images/rs_school_js.svg",alt:"RSSchool logo"})}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:"https://rs.school/react/"}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:"2021, Github: https://github.com/natallia-js/react-game"})]})]})]})})},C=function(t){t&&t instanceof Function&&a.e(4).then(a.bind(null,25)).then((function(e){var a=e.getCLS,c=e.getFID,o=e.getFCP,r=e.getLCP,s=e.getTTFB;a(t),c(t),o(t),r(t),s(t)}))};s.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(g,{})}),document.getElementById("root")),C()}],[[22,1,2]]]);
//# sourceMappingURL=main.30abe8b2.chunk.js.map